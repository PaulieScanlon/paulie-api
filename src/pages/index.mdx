# The documentation for Paulie API

This site is built using [Gatsby](https://www.gatsbyjs.com/) and restricts access to a set of [Serverless Functions](https://www.gatsbyjs.com/docs/reference/functions/) hosted on [Gatsby Cloud](https://www.gatsbyjs.com/products/cloud/). <br /> It acts as a standalone API for all of my things ðŸ•º

<Divider />

All API endpoints use the same resource origin: `https://paulieapi.gatsbyjs.io`

<Divider />

## [Twitter](#twitter)

<EndpointMessage type="POST" endpoint="/api/get-twitter-user" icon="lock" />

This endpoint uses the Twitter `users/by/username/${username}` endpoint under the hood to return information about a Twitter username.

<br />

<UsageDetails to="/get-twitter-user" />

<Box
  variant='styles.tableWrapper'
>

| Endpoint                | Type | Parameters       | required | default | Allowed Domains                                    | Response |
| ----------------------- | ---- | ---------------- | -------- | ------- | -------------------------------------------------- | -------- |
| `/api/get-twitter-user` | POST | username: string | true     | n/a     | https://paulie.dev <br /> https://pauliescanlon.io | JSON     |

</Box>

<small>Example Request</small>

```javascript
// using axios
await axios('https://paulieapi.gatsbyjs.io/api/get-twitter-user', {
  method: 'POST',
  data: {
    username: 'PaulieScanlon',
  },
})

// using fetch
await fetch('https://paulieapi.gatsbyjs.io/api/get-twitter-user', {
  method: 'POST',
  body: JSON.stringify({ username: 'PaulieScanlon' }),
})
```

<small>Example Response</small>

```json
{
  "message": "ðŸ•º Twitter request ok",
  "user": {
    "description": "Jamstack Developer / Technical Content Writer (freelance)",
    "profile_image_url": "https://pbs.twimg.com/profile_images/1230516491084275714/ZnhK4vNX_normal.jpg",
    "created_at": "2012-01-21T07:13:24.000Z",
    "name": "Paul Scanlon",
    "url": "https://t.co/4ABWM2bXYQ",
    "username": "PaulieScanlon",
    "location": "Worthing / UK"
    ...
  }
}
```

<Divider />

## [Stripe](#stripe)

<EndpointMessage type="POST" endpoint="/api/make-stripe-payment" icon="lock" />

This endpoint uses the Stripe `stripe.checkout.sessions.create` method under the hood to create a checkout url for a user provided payment amount.

<br />

<UsageDetails to="/make-stripe-payment" />

<Box
  variant='styles.tableWrapper'
>

| Endpoint                   | Type | Parameters          | required | default | Allowed Domains           | Response |
| -------------------------- | ---- | ------------------- | -------- | ------- | ------------------------- | -------- |
| `/api/make-stripe-payment` | POST | product: string     | true     | n/a     | https://www.mdx-embed.com | JSON     |
| -                          | -    | amount: number      | true     | n/a     | -                         | -        |
| -                          | -    | success_url: string | true     | n/a     | -                         | -        |
| -                          | -    | cancel_url: string  | true     | n/a     | -                         | -        |

</Box>

<small>Example Request</small>

```javascript
// using axios
await axios('https://paulieapi.gatsbyjs.io/api/make-stripe-payment', {
  method: 'POST',
  data: {
    product: 'prod_KAgqqzBEBmuYkT',
    amount: 5,
    success_url: 'https://www.mdx-embed.com',
    cancel_url: 'https://www.mdx-embed.com',
  },
})

// using fetch
await fetch('https://paulieapi.gatsbyjs.io/api/make-stripe-payment', {
  method: 'POST',
  body: JSON.stringify({
    product: 'prod_KAgqqzBEBmuYkT',
    amount: 5,
    success_url: 'https://www.mdx-embed.com',
    cancel_url: 'https://www.mdx-embed.com',
  }),
})
```

<small>Example Response</small>

```json
{
  "message": "ðŸ•º Stripe checkout created ok",
  "url": "https://checkout.stripe.com/pay/cs_test_a1zSrSYeXc5y5DnEbSCsXQ8kYIuV4vaaDcFbOVpZPsTllPfbSFgdtJ9Jtl#fidkdWxOYHwnPyd1blpxYHZxWjA0T1ZVfV9OQTNCQmBHVDcxYmdyQkRON39zbzNBN2J2S0xkZj1RZ003MTJxU3RvNEJBalFPaWxRR0Zib0xwclZPSGZyTzVrTWpMc0tqUlNBQz1ibjJ1c01vNTV%2FZ21Dan9ubycpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl"
}
```

<Divider />

## [GitHub](#github)

<EndpointMessage type="POST" endpoint="/api/get-github-user" icon="lock" />

This endpoint uses the Octokit `octokit.request('GET /users/${username}')` under the hood to return information about a GitHub username.

<br />

<UsageDetails to="/get-github-user" />

<Box
  variant='styles.tableWrapper'
>

| Endpoint               | Type | Parameters       | required | default | Allowed Domains | Response |
| ---------------------- | ---- | ---------------- | -------- | ------- | --------------- | -------- |
| `/api/get-github-user` | POST | username: string | true     | n/a     | n/a             | JSON     |

</Box>

<small>Example Request</small>

```javascript
// using axios
await axios('https://paulieapi.gatsbyjs.io/api/get-github-user', {
  method: 'POST',
  data: {
    username: 'PaulieScanlon',
  },
})

// using fetch
await fetch('https://paulieapi.gatsbyjs.io/api/get-github-user', {
  method: 'POST',
  body: JSON.stringify({
    username: 'PaulieScanlon',
  }),
})
```

<small>Example Response</small>

```json
{
  "message": "ðŸ•º GitHub request ok",
  "user": {
    "login": "PaulieScanlon",
    "avatar_url": "https://avatars.githubusercontent.com/u/1465706?v=4",
    "name": "Paul Scanlon",
    "blog": "www.paulie.dev",
    "bio": "Jamstack Developer / Technical Content Writer (freelance)",
    "public_repos": 78,
    "public_gists": 18,
    "followers": 203,
    "following": 55,
    "private_gists": 1,
    "total_private_repos": 15,
    "owned_private_repos": 15
    ...
  }
}
```

<Divider />

<EndpointMessage type="POST" endpoint="/api/get-github-events" icon="lock" />

This endpoint uses the Octokit `octokit.request('GET /users/${username}/events')` under the hood to return events for a GitHub username.

<br />

<UsageDetails to="/get-github-events" />

<Box
  variant='styles.tableWrapper'
>

| Endpoint                 | Type | Parameters       | required | default | Allowed Domains | Response |
| ------------------------ | ---- | ---------------- | -------- | ------- | --------------- | -------- |
| `/api/get-github-events` | POST | username: string | true     | n/a     | n/a             | JSON     |
| -                        | -    | results: number  | false    | 5       | -               | -        |

</Box>

<small>Example Request</small>

```javascript
// using axios
await axios('https://paulieapi.gatsbyjs.io/api/get-github-events', {
  method: 'POST',
  data: {
    username: 'PaulieScanlon',
    results: 5,
  },
})

// using fetch
await fetch('https://paulieapi.gatsbyjs.io/api/get-github-events', {
  method: 'POST',
  body: JSON.stringify({
    username: 'PaulieScanlon',
    results: 5,
  }),
})
```

<small>Example Response</small>

```json
{
  "message": "ðŸ•º GitHub request ok",
  "events": [
    {
      "id": "17853848747",
      "type": "PushEvent",
      "actor": {
        "login": "PaulieScanlon",
        "display_login": "PaulieScanlon",
        "url": "https://api.github.com/users/PaulieScanlon",
        "avatar_url": "https://avatars.githubusercontent.com/u/1465706?"
      },
      "repo": {
        "id": 311980309,
        "name": "PaulieScanlon/paulie-api",
        "url": "https://api.github.com/repos/PaulieScanlon/paulie-api"
      },
      ...
    }
  ]
}
```
